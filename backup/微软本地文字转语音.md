## HTML 版本
```
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本转语音并保存为音频</title>
</head>
<body>
    <h1>文本转语音并保存为音频</h1>
    
    <label for="textInput">请输入文本：</label><br>
    <textarea id="textInput" rows="4" cols="50"></textarea><br><br>

    <label for="voiceSelect">选择中文语音：</label>
    <select id="voiceSelect"></select><br><br>

    <button id="startButton">开始朗读并保存音频</button>

    <script>
        // 初始化音频上下文
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const mediaStreamDestination = audioContext.createMediaStreamDestination();

        // 创建一个 `MediaRecorder` 用于录音
        const recorder = new MediaRecorder(mediaStreamDestination.stream);
        let audioChunks = [];

        // 录音完成时，生成音频文件并保存
        recorder.ondataavailable = (event) => {
            audioChunks.push(event.data);
        };

        // 当录音停止时，生成并下载音频文件
        recorder.onstop = () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
            const audioUrl = URL.createObjectURL(audioBlob);
            
            // 创建一个下载链接
            const link = document.createElement('a');
            link.href = audioUrl;
            link.download = 'speech_output.wav';
            link.click();
        };

        // 获取可用的中文语音并填充选择框
        function populateVoiceList() {
            const voices = speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            voiceSelect.innerHTML = ''; // 清空现有选项

            // 过滤中文语音
            const chineseVoices = voices.filter(voice => voice.lang === 'zh-CN' || voice.lang === 'zh-TW');
            
            // 将中文语音填充到下拉框
            chineseVoices.forEach((voice) => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = voice.name;
                voiceSelect.appendChild(option);
            });
        }

        // 创建朗读函数并启动音频合成
        function speakAndSave(text, selectedVoice) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-CN'; // 设置中文语音
            utterance.voice = selectedVoice; // 设置选择的音色

            // 连接语音合成到音频上下文
            const sourceNode = audioContext.createMediaStreamSource(mediaStreamDestination.stream);
            sourceNode.connect(audioContext.destination);

            // 启动语音合成并开始录音
            window.speechSynthesis.speak(utterance);
            recorder.start();
        }

        // 执行朗读并保存音频
        document.getElementById('startButton').addEventListener('click', () => {
            const textInput = document.getElementById('textInput').value.trim();
            const selectedVoiceName = document.getElementById('voiceSelect').value;
            const voices = speechSynthesis.getVoices();
            const selectedVoice = voices.find(voice => voice.name === selectedVoiceName);

            if (textInput) {
                speakAndSave(textInput, selectedVoice);
                // 停止录音并保存音频文件
                setTimeout(() => recorder.stop(), 2000); // 设置朗读停止后录音停止
            } else {
                alert('请输入文本');
            }
        });

        // 初始化并填充可用的中文语音列表
        populateVoiceList();
        
        // 在语音列表加载完后，重新填充语音选择框
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = populateVoiceList;
        }
    </script>
</body>
</html>

```